#!/usr/bin/env bash

# Concise and Less Intrusive macOS Defaults Script

# Close any open System Preferences panes so changes can take effect immediately
osascript -e 'tell application "System Preferences" to quit'

# --- Essential Quality-of-Life UI Tweaks ---

# 1. Expand standard Save and Print panels by default
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode2 -bool true
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint -bool true
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint2 -bool true

# 2. Automatically quit the printer app once print jobs complete
defaults write com.apple.print.PrintingPrefs "Quit When Finished" -bool true

# --- Optional/Subjective Preferences (Uncomment to enable) ---

# Optional: Always show scrollbars (instead of auto-hiding)
# defaults write NSGlobalDomain AppleShowScrollBars -string "Always"
# Possible values: `WhenScrolling`, `Automatic`, `Always`

# Optional: Save new documents locally (not to iCloud) by default
# defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false

# Optional: Enable faster keyboard repeat rates
# KeyRepeat: Controls the rate of repetition (2 is fast, 15 is slow)
# InitialKeyRepeat: Controls the delay before repetition starts (15 is fast, 120 is slow)
# The values 2 and 15 are common for a highly responsive feel.
defaults write NSGlobalDomain KeyRepeat -int 2
defaults write NSGlobalDomain InitialKeyRepeat -int 15

echo "macOS settings updated. Log out and log back in for all changes to take effect."
